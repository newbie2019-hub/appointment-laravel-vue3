import{c as le,r as b,o as Je,u as ae,a as Qe,b as ne,t as Ze,w as et,l as Se,d as H,e as A,f as a,g as n,H as tt,h as s,F as re,i as p,j as e,k as c,m as ke,n as y,p as Ce,q as st,s as x,v as h,x as ot,y as lt,z as u}from"./app.e7bbbd2e.js";import{_ as at}from"./Authenticated.2a6ab4b3.js";import{_}from"./Button.ebb59778.js";import{_ as U}from"./FloatingInput.4406e185.js";import{_ as k}from"./FormInput.a1bdbb22.js";import{_ as nt}from"./FloatingSelect.1de3faf4.js";import{_ as N}from"./FloatingTextArea.a24531fc.js";import{_ as Ae}from"./Chip.57eee2a6.js";import{P as rt}from"./Pagination.e6fb0e11.js";import{_ as E}from"./Modal.2cb71e5a.js";import{v as it,_ as Ve}from"./main.4c9663a7.js";import{f as ie,c as Pe,s as dt,a as R}from"./Utilities.5f54765f.js";import{_ as ct}from"./Calendar.6cd2351f.js";import{s as Me}from"./vue-multiselect.esm.13011625.js";import{h as de}from"./moment.9709ab41.js";/* empty css                                              */var ce={};Object.defineProperty(ce,"__esModule",{value:!0});function G(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?G=function(d){return typeof d}:G=function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},G(r)}var Fe="https://js.stripe.com/v3",ut=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Ee="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",pt=function(){for(var d=document.querySelectorAll('script[src^="'.concat(Fe,'"]')),f=0;f<d.length;f++){var v=d[f];if(!!ut.test(v.src))return v}return null},mt=function(d){var f=d&&!d.advancedFraudSignals?"?advancedFraudSignals=false":"",v=document.createElement("script");v.src="".concat(Fe).concat(f);var g=document.head||document.body;if(!g)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return g.appendChild(v),v},_t=function(d,f){!d||!d._registerWrapper||d._registerWrapper({name:"stripe-js",version:"1.35.0",startTime:f})},W=null,ht=function(d){return W!==null||(W=new Promise(function(f,v){if(typeof window=="undefined"){f(null);return}if(window.Stripe&&d&&console.warn(Ee),window.Stripe){f(window.Stripe);return}try{var g=pt();g&&d?console.warn(Ee):g||(g=mt(d)),g.addEventListener("load",function(){window.Stripe?f(window.Stripe):v(new Error("Stripe.js not available"))}),g.addEventListener("error",function(){v(new Error("Failed to load Stripe.js"))})}catch(P){v(P);return}})),W},ft=function(d,f,v){if(d===null)return null;var g=d.apply(void 0,f);return _t(g,v),g},vt=function(d){var f=`invalid load parameters; expected object of shape

    {advancedFraudSignals: boolean}

but received

    `.concat(JSON.stringify(d),`
`);if(d===null||G(d)!=="object")throw new Error(f);if(Object.keys(d).length===1&&typeof d.advancedFraudSignals=="boolean")return d;throw new Error(f)},$e,ze=!1,qe=function(){for(var d=arguments.length,f=new Array(d),v=0;v<d;v++)f[v]=arguments[v];ze=!0;var g=Date.now();return ht($e).then(function(P){return ft(P,f,g)})};qe.setLoadParameters=function(r){if(ze)throw new Error("You cannot change load parameters after calling loadStripe");$e=vt(r)};ce.loadStripe=qe;var yt=ce;const xt={class:"px-6 max-w-8xl lg:px-8"},gt=e("div",{class:"mx-auto mt-6 sm:px-6 lg:px-8"},[e("p",{class:"text-xl font-medium"},"Appointment Summary"),e("p",null,"Here is an overview of your appointments.")],-1),wt={class:"flex flex-wrap py-8 max-w-8xl sm:px-6 lg:px-8 gap-x-4 md:flex-row gap-y-4"},bt={class:"flex-1 p-4 text-white bg-red-500 rounded-md"},St={class:"flex justify-between"},kt={class:"flex items-center text-9xl"},Ct=e("div",{class:"flex flex-col items-end gap-y-8"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-10 h-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})]),e("p",{class:"font-medium leading-5 tracking-wider text-right uppercase"},[u(" Trashed "),e("br"),u("Appointments ")])],-1),At=e("span",{class:"sr-only"},"Trashed Appointments",-1),Vt={class:"flex-1 p-4 text-white bg-green-600 rounded-md"},Pt={class:"flex justify-between"},Mt={class:"flex items-center text-9xl"},Et=e("div",{class:"flex flex-col items-end gap-y-8"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-10 h-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),e("p",{class:"font-medium leading-5 tracking-wider text-right uppercase"},[u(" Total "),e("br"),u("Appointments ")])],-1),Ft=e("span",{class:"sr-only"},"Total Appointments",-1),$t={class:"flex-1 p-4 text-white bg-blue-600 rounded-md"},zt={class:"flex justify-between"},qt={class:"flex items-center text-9xl"},Tt=e("div",{class:"flex flex-col items-end gap-y-8"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-9 w-9",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),e("p",{class:"font-medium leading-5 tracking-wider text-right uppercase"},[u(" Today's "),e("br"),u("Appointments ")])],-1),Dt=e("span",{class:"sr-only"},"Today's Appointments",-1),jt={class:"px-6 max-w-8xl lg:px-8"},Lt=e("div",{class:"mx-auto mt-6 sm:px-6 lg:px-8"},[e("p",{class:"text-xl font-medium"},"Appointment Calendar"),e("p",null,"Here is an overview of your appointments.")],-1),Ut={class:"py-8 mx-auto max-w-8xl sm:px-6 lg:px-8 md:flex gap-x-4"},Nt={class:"flex-1 w-full"},It={class:"py-10"},Ot={class:"px-6 max-w-8xl lg:px-8"},Bt={class:"overflow-x-auto sm:rounded-lg"},Yt={class:""},Ht={class:"pb-6 mx-auto bg-white border-gray-200 rounded-lg max-w-8xl sm:px-6 lg:px-8"},Rt=e("p",{class:"text-xl font-medium"},"All Appointments",-1),Wt=e("p",{class:"text-sm text-gray-700"}," Shown below are the appointments record ",-1),Gt={class:"flex justify-between mb-6 mt-7 gap-x-2"},Kt=e("option",{value:"with"}," All Appointments ",-1),Xt=e("option",{value:""}," Active Appointments ",-1),Jt=e("option",{value:"only"}," Trashed Appointments ",-1),Qt=e("option",{value:"pending"}," Pending Appointments ",-1),Zt=e("option",{value:"approved"}," Approved Appointments ",-1),es=e("option",{value:"finished"}," Finished Appointments ",-1),ts={class:"flex gap-x-2"},ss=u("Add Appointment"),os={class:"overflow-x-auto"},ls={class:"min-w-full divide-y divide-gray-300"},as=e("thead",{class:"bg-gray-50"},[e("tr",{class:"[&>*]:uppercase font-medium text-xs text-gray-500"},[e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6"}," ID "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"}," Status "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"}," Patient "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"}," Email "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"}," Schedule "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"}," Message "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"}," Sub Total "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"}," Payment Type "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"}," Payment "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"}," Created On "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"}," Deleted On "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 sm:pl-6 text-left"}," Actions ")])],-1),ns={class:"bg-white divide-y divide-gray-200"},rs={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},is={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},ds={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},cs={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},us={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},ps={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},ms={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},_s={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},hs={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},fs={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},vs={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},ys={class:"relative py-4 pl-3 pr-4 text-sm whitespace-nowrap sm:pr-6"},xs=u("Details"),gs=u("Health Form"),ws=u("Update"),bs=u("Certificate"),Ss=u("Prescription"),ks=u("View Prescription"),Cs=u("View Receipt"),As=u("View Receipt"),Vs=u("Payment"),Ps=u("Trash"),Ms={key:0},Es=e("td",{colspan:"11"},[e("div",{class:"py-4 mx-auto font-medium text-center text-gray-600"}," No data available .. ")],-1),Fs=[Es],$s={class:"mt-2 text-sm text-gray-500"},zs=e("p",{class:"text-xl font-bold"},"Appointment Information",-1),qs=e("p",{class:"text-sm text-gray-600"}," Here are the informations for this appointment ",-1),Ts=e("p",{class:"mt-3 mb-2"},"Patient Information",-1),Ds={class:"text-sm"},js={class:"text-sm"},Ls={class:"text-sm"},Us=e("p",{class:"mt-4 mb-2"},"Appointment Information",-1),Ns={class:"text-sm"},Is={class:"text-sm"},Os={class:"text-sm"},Bs=e("p",{class:"mt-4 mb-2"},"Services Selected",-1),Ys=u("Close"),Hs=u("Mark as Finished"),Rs=u("Approve"),Ws=e("p",{class:"text-xl font-bold"},"Confirm Delete",-1),Gs=e("p",{class:"text-sm text-gray-600"}," Are you sure you want to move this appointment to trash? Once moved to trash the appointment status will be marked as cancelled and cannot be restored. ",-1),Ks=u("Close"),Xs=u("Confirm"),Js=e("p",{class:"text-xl font-bold"},"Prescription",-1),Qs=e("p",{class:"text-sm font-regular"}," Enter your prescription for this appointment ",-1),Zs={action:"",class:"mt-2"},eo=u("Close"),to=u("Save"),so=e("p",{class:"text-xl font-bold"},"Payment Transaction",-1),oo=e("p",{class:"mt-1 text-sm text-gray-500"}," We do not store any credit card informations. All transactions are processed by Stripe. ",-1),lo={key:0},ao=e("p",{class:"mt-4 mb-1 font-medium text-center text-gray-500"}," Loading Secure Payment ... ",-1),no=[ao],ro=e("p",{class:"mt-1 mb-2"},"Credit Card Information",-1),io=e("div",{id:"card-element",class:"[&>*]:border-gray-500 border-2 p-3 rounded-md mb-4"},null,-1),co=[ro,io],uo=u("Close"),po=e("p",{class:"text-xl font-bold"},"Accept Payment",-1),mo=e("p",{class:"mt-1 text-sm text-gray-500"}," Please fill-in all the fields in the form. ",-1),_o=u("Close"),ho={class:"text-xl font-bold"},fo=e("p",null,"Please fill-in all fields.",-1),vo={class:"flex flex-col"},yo=e("p",{class:"mt-2 text-sm"},"Select Service",-1),xo={class:"flex flex-col option__desc"},go={class:"option__title"},wo={class:"text-sm"},bo={key:0,class:"mt-1 text-sm text-red-500"},So={key:1},ko=e("p",{class:"mt-2 text-sm"},"Select Patient",-1),Co={key:0,class:"mt-1 text-sm text-red-500"},Ao={class:"mt-2"},Vo=u("Close"),Po=u("Save Appointment"),Mo=e("p",{class:"text-xl font-bold"},"Confirm Restore",-1),Eo=e("p",{class:"text-sm text-gray-600"}," Are you sure you want to restore this scheduled appointment? This might cause conflicts to some of the schedules. ",-1),Fo=u("Close"),$o=u("Restore"),Ko={__name:"Appointments",props:{appointments:Object,errors:Object,filters:Object,trashedAppointmentsCount:Number,todaysAppointment:Number,services:Object,users:Object},setup(r){const d=r,f=le(()=>{var l;return(l=ae().props.value.errors.error)!=null?l:"Something went wrong"}),v=le(()=>{var l;return(l=ae().props.value.flash.success)!=null?l:"Success"});let g,P,V=b(!1);Je(async()=>{P=await yt.loadStripe(ae().props.value.stripe.public_key),g=P.elements().create("card",{classes:{base:"p-2 border-gray-500"}})});const I=()=>ee.value=!ee.value,ue=()=>te.value=!te.value,Te=async()=>{var l;S.subtotal=i.value.subtotal,S.appointment_id=i.value.id,parseFloat(i.value.subtotal)+parseFloat((l=S.addons_amount)!=null?l:0)>S.amount_tendered?w.error("Insufficient amount is received"):(V.value=!0,S.transform(o=>({...o,change:o.amount_tendered-o.subtotal})).post(route("payment-branch.store"),{onError:()=>{w.error("Something went wrong")},onSuccess:()=>{w.success(v.value),se()}})),V.value=!1},De=async()=>{V.value=!0;const{paymentMethod:l,error:o}=await P.createPaymentMethod("card",g,{billing_details:{name:i.value.patient.full_name,email:i.value.patient.email,address:{line1:i.value.patient.address}}});o?w.error(o.message):(i.value.paymentMethodId=l.id,H.Inertia.post(route("payment.store"),i.value,{onError:()=>{w.error("Something went wrong")},onSuccess:()=>{w.success(v.value),me()}})),V.value=!1},w=Qe(),pe={appointment_id:null,prescription:"",note:""};let C=ne({...pe});const S=ne({id:null,subtotal:null,change:null,appointment_id:null,amount_tendered:0,addons_amount:0,addons_note:""});let m=ne({id:null,service:null,price:null,subtotal:0,selected_services:[],user_id:null,message:"",schedule:"",healthFormData:{q1:null,q2:null,q3:null,q4:null,q5:null}});const i=b({id:null,message:null,schedule:null,patient:{first_name:null,last_name:null},healthFormData:{q1:null,q2:null,q3:null,q4:null,q5:null}}),$=b(!1),K=b(!1),X=b(!1),J=b(!1),M=b(!1),z=b(!1),Q=b(!1),q=b(!1),Z=b(!1),ee=b(!1),te=b(!1),je=Ze(m,"selected_services"),Le=le(()=>parseFloat(i.value.subtotal)+parseFloat(S.addons_amount===""?0:S.addons_amount)),me=l=>{z.value=!0,l?q.value=!q.value:(M.value=!M.value,M.value&&setTimeout(()=>{z.value=!1,g.mount("#card-element")},1200))},T=()=>{Q.value=!Q.value},O=(l=null,o={...pe})=>{C.appointment_id=l,C.note=o==null?void 0:o.note,C.prescription=o==null?void 0:o.prescription,Z.value=!Z.value},_e=()=>{M.value=!M.value,M.value&&setTimeout(()=>{z.value=!1,g.mount("#card-element")},1200)},se=()=>{q.value=!q.value},B=()=>{X.value=!X.value},oe=()=>{J.value=!J.value},F=(l=null)=>{var o;l!=null&&(m.message=l.message,m.id=l.id,m.user_id=l.patient,m.selected_services=(o=l.services)==null?void 0:o.map(Y=>Y.service),m.schedule=de(l.schedule).format("YYYY-MM-DDThh:mm")),K.value=!K.value},Ue=()=>{$.value?He():Re()},Ne=()=>{C.post(route("prescription.store"),{onError:()=>{w.error("Something went wrong")},onSuccess:()=>{w.success("Appointment prescription has been saved!"),O(),C.appointment_id=null,C.prescription=null,C.note=null}})},Ie=()=>{H.Inertia.delete(`/appointments/${i.value.id}`,{preserveState:!0,onSuccess:()=>{w.success("Appointment has been moved to trash successfully!"),B()}})},Oe=()=>{m.put(`/appointments/restore/${i.value.id}`,{preserveState:!0,onSuccess:()=>{w.success("Appointment has been restored successfully!"),oe()}})},Be=()=>{m.put(`/appointments/approve/${i.value.id}`,{preserveState:!0,onError:()=>{w.error("Something went wrong")},onSuccess:()=>{w.success("Appointment has been approved successfully!"),T()}})},Ye=()=>{m.put(`/appointments/finished/${i.value.id}`,{preserveState:!0,onError:()=>{w.error("Something went wrong")},onSuccess:()=>{w.success("Appointment has been marked as finished"),T()}})},He=()=>{m.transform(l=>{var o;return{...l,user_id:(o=l==null?void 0:l.user_id)==null?void 0:o.id}}).post("/appointments",{preserveState:!0,onError:l=>{w.error(`${f.value}`),I()},onSuccess:()=>{w.success("Appointment created successfully!"),I(),F(),m.reset()}})},Re=()=>{m.transform(l=>{var o;return{...l,user_id:(o=l==null?void 0:l.user_id)==null?void 0:o.id}}).put(`/appointments/${m.id}`,{preserveState:!0,onError:l=>{w.error(`${f.value}`)},onSuccess:()=>{w.success("Appointment update successfully!"),F(),m.reset()}})},We=()=>{var l;m.subtotal=0,(l=m.selected_services)==null||l.map(o=>{m.subtotal+=parseFloat(o.price)})},Ge=l=>{console.log(l)};et(je,We);let D=b(d.filters.search),j=b(d.filters.trashed);const he=Se.exports.debounce(()=>{H.Inertia.get("/appointments",{search:D.value,trashed:j.value},{preserveState:!0})},300),Ke=Se.exports.debounce(l=>{H.Inertia.get("/appointments",{search:l},{preserveState:!0,only:["users"]})},300);return(l,o)=>(p(),A(re,null,[a(n(tt),{title:"Patient Appointments"}),a(at,null,{default:s(()=>{var Y,fe,ve;return[e("div",xt,[gt,e("div",wt,[e("div",bt,[e("div",St,[e("div",kt,c(n(ie)(r.trashedAppointmentsCount)),1),Ct]),At]),e("div",Vt,[e("div",Pt,[e("div",Mt,c(n(ie)(r.appointments.data.length)),1),Et]),Ft]),e("div",$t,[e("div",zt,[e("div",qt,c(n(ie)(r.todaysAppointment)),1),Tt]),Dt])])]),e("div",jt,[Lt,e("div",Ut,[e("div",Nt,[a(ct,{data:r.appointments.data,onEmitEvent:Ge},null,8,["data"])])])]),e("div",It,[e("div",Ot,[e("div",Bt,[e("div",Yt,[e("div",Ht,[Rt,Wt,e("div",Gt,[a(k,{label:"Filter Appointment",class:"w-56"},{default:s(()=>[a(nt,{onChange:n(he),modelValue:n(j),"onUpdate:modelValue":o[0]||(o[0]=t=>ke(j)?j.value=t:j=t)},{default:s(()=>[Kt,Xt,Jt,Qt,Zt,es]),_:1},8,["onChange","modelValue"])]),_:1}),e("div",ts,[a(_,{onClick:o[1]||(o[1]=y(t=>{$.value=!0,F()},["prevent"])),size:"sm",color:"success"},{default:s(()=>[ss]),_:1}),a(k,{label:"Search Appointment",for:"search"},{default:s(()=>[a(U,{modelValue:n(D),"onUpdate:modelValue":o[2]||(o[2]=t=>ke(D)?D.value=t:D=t),id:"search",onKeyup:n(he)},null,8,["modelValue","onKeyup"])]),_:1})])]),e("div",os,[e("table",ls,[as,e("tbody",ns,[(p(!0),A(re,null,Ce(r.appointments.data,(t,Xe)=>{var ye,xe,ge,we,be;return p(),A("tr",{key:Xe,class:st(["hover:bg-gray-100",{"bg-red-100":t.deleted_at}])},[e("td",rs,c(t.id),1),e("td",is,[a(Ae,{label:t.appointment_status,color:n(Pe)(t.appointment_status)},null,8,["label","color"])]),e("td",ds,c(t.patient.full_name),1),e("td",cs,c(t.patient.email),1),e("td",us,c(t.schedule),1),e("td",ps,c(n(dt)(t.message)),1),e("td",ms,c(n(R)(t.subtotal)),1),e("td",_s,c((xe=(ye=t.payment)==null?void 0:ye.payment_type)!=null?xe:"N/A"),1),e("td",hs,[a(Ae,{label:t.payment_status,color:n(Pe)(t.payment_status)},null,8,["label","color"])]),e("td",fs,c(t.created_at),1),e("td",vs,c(t.deleted_at),1),e("td",ys,[a(_,{text:"",size:"sm",onClick:L=>{T(),i.value=t}},{default:s(()=>[xs]),_:2},1032,["onClick"]),a(_,{text:"",size:"sm",onClick:L=>{ue(),i.value.healthFormData={q1:t.q1,q2:t.q2,q3:t.q3,q4:t.q4,q5:t.q5}}},{default:s(()=>[gs]),_:2},1032,["onClick"]),!t.deleted_at&&t.appointment_status!="Finished"&&t.appointment_status!="Approved"&&!l.$page.props.auth.user.is_admin?(p(),x(_,{key:0,onClick:L=>{$.value=!1,F(t)},text:"",size:"sm",color:"success"},{default:s(()=>[ws]),_:2},1032,["onClick"])):h("",!0),(l.$page.props.auth.user.is_admin||t.payment_status!=="Pending")&&!t.deleted_at&&t.appointment_status=="Finished"?(p(),x(_,{key:1,"is-link":"",href:l.route("certificate.generate",t.id),text:"",size:"sm",color:"success"},{default:s(()=>[bs]),_:2},1032,["href"])):h("",!0),l.$page.props.auth.user.is_admin?(p(),x(_,{key:2,onClick:y(L=>O(t.id,t.prescription),["prevent"]),text:"",size:"sm",color:"success"},{default:s(()=>[Ss]),_:2},1032,["onClick"])):h("",!0),!l.$page.props.auth.user.is_admin&&t.payment_status=="Paid"&&t.prescription!=null?(p(),x(_,{key:3,"is-link":"",href:l.route("prescription.generate",t.id),text:"",size:"sm",color:"success"},{default:s(()=>[ks]),_:2},1032,["href"])):h("",!0),((ge=t.payment)==null?void 0:ge.payment_type)=="Stripe"&&t.payment_status=="Paid"?(p(),x(_,{key:4,color:"success","is-link":"",text:"",size:"sm",href:(we=t.payment)==null?void 0:we.receipt_url,target:"_"},{default:s(()=>[Cs]),_:2},1032,["href"])):h("",!0),((be=t.payment)==null?void 0:be.payment_type)=="On-Branch"&&t.payment_status=="Paid"?(p(),x(_,{key:5,"is-link":"",href:l.route("invoice.generate",t.id),text:"",size:"sm",color:"success"},{default:s(()=>[As]),_:2},1032,["href"])):h("",!0),!t.deleted_at&&t.payment_status!="Paid"&&(t.appointment_status=="Approved"||t.appointment_status=="Finished")?(p(),x(_,{key:6,onClick:y(L=>{me(l.$page.props.auth.user.is_admin),i.value={...t}},["prevent"]),text:"",size:"sm",color:""},{default:s(()=>[Vs]),_:2},1032,["onClick"])):h("",!0),t.deleted_at?h("",!0):(p(),x(_,{key:7,onClick:y(L=>{B(),i.value=t},["prevent"]),text:"",size:"sm",color:"error"},{default:s(()=>[Ps]),_:2},1032,["onClick"]))])],2)}),128)),r.appointments.data.length==0?(p(),A("tr",Ms,Fs)):h("",!0)])])]),e("p",$s," Showing "+c((Y=r.appointments.from)!=null?Y:0)+" to "+c((fe=r.appointments.to)!=null?fe:0)+" out of "+c((ve=r.appointments.total)!=null?ve:0)+" appointments. ",1),a(rt,{links:r.appointments.links,right:""},null,8,["links"])])])])])]),Q.value?(p(),x(E,{key:0,onClose:T},{title:s(()=>[zs,qs]),body:s(()=>[Ts,e("p",Ds," Full Name: "+c(i.value.patient.full_name),1),e("p",js," Email: "+c(i.value.patient.email),1),e("p",Ls," Gender: "+c(i.value.patient.gender),1),Us,e("p",Ns," Schedule: "+c(i.value.schedule),1),e("p",Is," Message: "+c(i.value.message),1),e("p",Os," Created: "+c(i.value.created_at),1),Bs,(p(!0),A(re,null,Ce(i.value.services,t=>(p(),A("p",{class:"text-sm",key:t.id},c(t.service.service)+" - "+c(n(R)(t.service.price)),1))),128))]),footer:s(()=>[a(_,{onClick:y(T,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[Ys]),_:1},8,["onClick"]),i.value.deleted_at==null&&i.value.appointment_status=="Approved"&&i.value.appointment_status!="Cancelled"&&l.$page.props.auth.user.is_admin?(p(),x(_,{key:0,onClick:y(Ye,["prevent"]),text:"",size:"sm",color:"success"},{default:s(()=>[Hs]),_:1},8,["onClick"])):h("",!0),i.value.deleted_at==null&&i.value.appointment_status=="Pending"&&i.value.appointment_status!="Cancelled"&&l.$page.props.auth.user.is_admin?(p(),x(_,{key:1,onClick:y(Be,["prevent"]),text:"",size:"sm",color:"success"},{default:s(()=>[Rs]),_:1},8,["onClick"])):h("",!0)]),_:1})):h("",!0),X.value?(p(),x(E,{key:1,onClose:B},{title:s(()=>[Ws]),body:s(()=>[Gs]),footer:s(()=>[a(_,{onClick:y(B,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[Ks]),_:1},8,["onClick"]),a(_,{onClick:y(Ie,["prevent"]),text:"",size:"sm",color:"error"},{default:s(()=>[Xs]),_:1},8,["onClick"])]),_:1})):h("",!0),Z.value?(p(),x(E,{key:2,onClose:O},{title:s(()=>[Js,Qs]),body:s(()=>[e("form",Zs,[a(k,{label:"Prescription",for:"prescription",class:"mt-3",error:r.errors.prescription},{default:s(()=>[a(N,{modelValue:n(C).prescription,"onUpdate:modelValue":o[3]||(o[3]=t=>n(C).prescription=t),id:"prescription",required:"","aria-required":""},null,8,["modelValue"])]),_:1},8,["error"]),a(k,{label:"Additional Note",for:"prescription-additional",class:"mt-3",error:r.errors.note},{default:s(()=>[a(N,{modelValue:n(C).note,"onUpdate:modelValue":o[4]||(o[4]=t=>n(C).note=t),id:"prescription-additional",required:"","aria-required":""},null,8,["modelValue"])]),_:1},8,["error"])])]),footer:s(()=>[a(_,{onClick:y(O,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[eo]),_:1},8,["onClick"]),a(_,{onClick:y(Ne,["prevent"]),text:"",size:"sm",color:"success"},{default:s(()=>[to]),_:1},8,["onClick"])]),_:1})):h("",!0),M.value?(p(),x(E,{key:3,onClose:_e},{title:s(()=>[so,oo]),body:s(()=>[z.value?(p(),A("div",lo,no)):h("",!0),ot(e("div",null,co,512),[[lt,!z.value]]),a(k,{for:"payment_fname",error:r.errors.schedule,label:"Full Name",class:"mt-1 mb-3"},{default:s(()=>[a(U,{disabled:"",type:"text",id:"payment_fname",modelValue:i.value.patient.full_name,"onUpdate:modelValue":o[5]||(o[5]=t=>i.value.patient.full_name=t),"aria-disabled":""},null,8,["modelValue"])]),_:1},8,["error"]),a(k,{for:"payment_fname",error:r.errors.schedule,label:"Address",class:"mt-3 mb-3"},{default:s(()=>[a(N,{type:"text",id:"payment_fname",modelValue:i.value.patient.address,"onUpdate:modelValue":o[6]||(o[6]=t=>i.value.patient.address=t),disabled:"","aria-disabled":""},null,8,["modelValue"])]),_:1},8,["error"])]),footer:s(()=>[a(_,{onClick:y(_e,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[uo]),_:1},8,["onClick"]),a(_,{onClick:y(De,["prevent"]),text:"",size:"sm",color:"success",disabled:n(V)},{default:s(()=>[u(c(n(V)?"Processing..":"Proceed"),1)]),_:1},8,["onClick","disabled"])]),_:1})):h("",!0),q.value?(p(),x(E,{key:4,onClose:se},{title:s(()=>[po,mo]),body:s(()=>[a(k,{for:"payment_fname",error:r.errors.schedule,label:"Amount Tendered",class:"mt-3 mb-3"},{default:s(()=>[a(U,{type:"number",id:"amounttendered",modelValue:n(S).amount_tendered,"onUpdate:modelValue":o[7]||(o[7]=t=>n(S).amount_tendered=t)},null,8,["modelValue"])]),_:1},8,["error"]),a(k,{for:"addons_amount",error:r.errors.addons_amount,label:"Addons Amount",class:"mt-3 mb-3"},{default:s(()=>[a(U,{type:"number",id:"addons_amount",modelValue:n(S).addons_amount,"onUpdate:modelValue":o[8]||(o[8]=t=>n(S).addons_amount=t)},null,8,["modelValue"])]),_:1},8,["error"]),a(k,{for:"addons_note",error:r.errors.addons_note,label:"Addons Note",class:"mt-3 mb-3"},{default:s(()=>[a(N,{type:"text",id:"addons_note",modelValue:n(S).addons_note,"onUpdate:modelValue":o[9]||(o[9]=t=>n(S).addons_note=t)},null,8,["modelValue"])]),_:1},8,["error"]),a(k,{for:"subtotal",error:r.errors.subtotal,label:"Subtotal",class:"mt-3 mb-3"},{default:s(()=>[a(U,{type:"number",id:"subtotal",modelValue:i.value.subtotal,"onUpdate:modelValue":o[10]||(o[10]=t=>i.value.subtotal=t),disabled:"","aria-disabled":""},null,8,["modelValue"])]),_:1},8,["error"]),e("p",null,"Total Amount: "+c(n(Le)),1)]),footer:s(()=>[a(_,{onClick:y(se,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[_o]),_:1},8,["onClick"]),a(_,{onClick:y(Te,["prevent"]),text:"",size:"sm",color:"success",disabled:n(V)},{default:s(()=>[u(c(n(V)?"Processing..":"Proceed Payment"),1)]),_:1},8,["onClick","disabled"])]),_:1})):h("",!0),K.value?(p(),x(E,{key:5,onClose:F},{title:s(()=>[e("p",ho,c($.value?"New Appointment":"Update Appointment"),1),fo]),body:s(()=>[e("form",vo,[a(k,{for:"appointment",error:r.errors.schedule,label:"Date and Time",class:"mt-3"},{default:s(()=>[a(n(it),{label:"Select Schedule",modelValue:n(m).schedule,"onUpdate:modelValue":o[11]||(o[11]=t=>n(m).schedule=t),is24:!1,weekStart:"0",disabledWeekDays:[0],minutesIncrement:"30",startTime:{hours:"10",minutes:"00"},noMinutesOverlay:"","min-date":n(de)().add(1,"day").format("YYYY-MM-DDT00:00"),"max-date":n(de)().add(2,"month").format("YYYY-MM-DDT00:00")},null,8,["modelValue","min-date","max-date"])]),_:1},8,["error"]),a(k,{for:"message",error:r.errors.message,label:"Message",class:"mt-2"},{default:s(()=>[a(N,{id:"message",modelValue:n(m).message,"onUpdate:modelValue":o[12]||(o[12]=t=>n(m).message=t)},null,8,["modelValue"])]),_:1},8,["error"]),yo,a(n(Me),{modelValue:n(m).selected_services,"onUpdate:modelValue":o[13]||(o[13]=t=>n(m).selected_services=t),options:r.services,multiple:!0,class:"border-2 border-gray-500 rounded-lg",selectLabel:"Select",deselectLabel:"Deselect",label:"service","track-by":"id"},{option:s(t=>[e("div",xo,[e("span",go,c(t.option.service),1),e("span",wo,c(n(R)(t.option.price)),1)])]),_:1},8,["modelValue","options"]),r.errors.selected_services?(p(),A("p",bo,c(r.errors.selected_services),1)):h("",!0),l.$page.props.auth.user.is_admin?(p(),A("div",So,[ko,a(n(Me),{modelValue:n(m).user_id,"onUpdate:modelValue":o[14]||(o[14]=t=>n(m).user_id=t),onSearchChange:n(Ke),options:r.users,multiple:!1,class:"border-2 border-gray-500 rounded-lg",selectLabel:"Select",deselectLabel:"Deselect",label:"full_name","track-by":"id",disabled:!$.value},null,8,["modelValue","onSearchChange","options","disabled"]),r.errors.user_id?(p(),A("p",Co,c(r.errors.user_id),1)):h("",!0)])):h("",!0),e("p",Ao," Subtotal: "+c(n(R)(n(m).subtotal)),1)])]),footer:s(()=>[a(_,{onClick:y(F,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[Vo]),_:1},8,["onClick"]),a(_,{onClick:y(I,["prevent"]),text:"",size:"sm",color:"success"},{default:s(()=>[Po]),_:1},8,["onClick"])]),_:1})):h("",!0),J.value?(p(),x(E,{key:6,onClose:oe},{title:s(()=>[Mo]),body:s(()=>[Eo]),footer:s(()=>[a(_,{onClick:y(oe,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[Fo]),_:1},8,["onClick"]),a(_,{onClick:y(Oe,["prevent"]),text:"",size:"sm",color:"success"},{default:s(()=>[$o]),_:1},8,["onClick"])]),_:1})):h("",!0),ee.value?(p(),x(Ve,{key:7,data:n(m).healthFormData,onEmitClose:I,onEmitSaveAppointment:Ue},null,8,["data"])):h("",!0),te.value?(p(),x(Ve,{key:8,"view-only":"",scrollable:"",data:i.value.healthFormData,onEmitClose:ue},null,8,["data"])):h("",!0)]}),_:1})],64))}};export{Ko as default};
