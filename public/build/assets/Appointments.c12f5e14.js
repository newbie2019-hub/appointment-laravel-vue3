import{c as ve,r as b,o as Oe,u as te,a as Re,b as se,t as qe,w as He,l as ye,d as R,e as S,f as l,g as n,H as We,h as s,F as oe,i as u,j as e,k as d,m as xe,n as y,p as ge,q as Ye,s as w,v as h,x as Ge,y as Ke,z as p}from"./app.5d97cad1.js";import{_ as Xe}from"./Authenticated.999f646e.js";import{_}from"./Button.cf7a3c64.js";import{_ as k,a as D}from"./FormInput.c29e736c.js";import{_ as Je}from"./FloatingSelect.89c99e7e.js";import{_ as q}from"./FloatingTextArea.349685c4.js";import{_ as Qe,a as we}from"./Calendar.d67592db.js";import{P as Ze}from"./Pagination.83e953a4.js";import{_ as M}from"./Modal.0dd2db39.js";import{f as le,c as be,s as et,a as H}from"./Utilities.5f54765f.js";import{s as Se,h as tt}from"./vue-multiselect.esm.d2aeefa8.js";/* empty css                                              */var ae={};Object.defineProperty(ae,"__esModule",{value:!0});function Y(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Y=function(i){return typeof i}:Y=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Y(r)}var Ce="https://js.stripe.com/v3",st=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,ke="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",ot=function(){for(var i=document.querySelectorAll('script[src^="'.concat(Ce,'"]')),f=0;f<i.length;f++){var v=i[f];if(!!st.test(v.src))return v}return null},lt=function(i){var f=i&&!i.advancedFraudSignals?"?advancedFraudSignals=false":"",v=document.createElement("script");v.src="".concat(Ce).concat(f);var x=document.head||document.body;if(!x)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return x.appendChild(v),v},at=function(i,f){!i||!i._registerWrapper||i._registerWrapper({name:"stripe-js",version:"1.35.0",startTime:f})},W=null,nt=function(i){return W!==null||(W=new Promise(function(f,v){if(typeof window=="undefined"){f(null);return}if(window.Stripe&&i&&console.warn(ke),window.Stripe){f(window.Stripe);return}try{var x=ot();x&&i?console.warn(ke):x||(x=lt(i)),x.addEventListener("load",function(){window.Stripe?f(window.Stripe):v(new Error("Stripe.js not available"))}),x.addEventListener("error",function(){v(new Error("Failed to load Stripe.js"))})}catch(P){v(P);return}})),W},rt=function(i,f,v){if(i===null)return null;var x=i.apply(void 0,f);return at(x,v),x},it=function(i){var f=`invalid load parameters; expected object of shape

    {advancedFraudSignals: boolean}

but received

    `.concat(JSON.stringify(i),`
`);if(i===null||Y(i)!=="object")throw new Error(f);if(Object.keys(i).length===1&&typeof i.advancedFraudSignals=="boolean")return i;throw new Error(f)},Ae,Pe=!1,Ve=function(){for(var i=arguments.length,f=new Array(i),v=0;v<i;v++)f[v]=arguments[v];Pe=!0;var x=Date.now();return nt(Ae).then(function(P){return rt(P,f,x)})};Ve.setLoadParameters=function(r){if(Pe)throw new Error("You cannot change load parameters after calling loadStripe");Ae=it(r)};ae.loadStripe=Ve;var ct=ae;const dt={class:"px-6 mx-auto max-w-7xl lg:px-8"},pt=e("div",{class:"mx-auto mt-6 sm:px-6 lg:px-8"},[e("p",{class:"text-xl font-medium"},"Appointment Summary"),e("p",null,"Here is an overview of your appointments.")],-1),ut={class:"flex flex-wrap py-8 mx-auto max-w-7xl sm:px-6 lg:px-8 gap-x-4 md:flex-row gap-y-4"},mt={class:"flex-1 p-4 text-white bg-red-500 rounded-md"},_t={class:"flex justify-between"},ft={class:"flex items-center text-9xl"},ht=e("div",{class:"flex flex-col items-end gap-y-8"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-10 h-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})]),e("p",{class:"font-medium leading-5 tracking-wider text-right uppercase"},[p("Trashed "),e("br"),p("Appointments ")])],-1),vt=e("span",{class:"sr-only"},"Trashed Appointments",-1),yt={class:"flex-1 p-4 text-white bg-green-600 rounded-md"},xt={class:"flex justify-between"},gt={class:"flex items-center text-9xl"},wt=e("div",{class:"flex flex-col items-end gap-y-8"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-10 h-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),e("p",{class:"font-medium leading-5 tracking-wider text-right uppercase"},[p("Total "),e("br"),p("Appointments ")])],-1),bt=e("span",{class:"sr-only"},"Total Appointments",-1),St={class:"flex-1 p-4 text-white bg-blue-600 rounded-md"},kt={class:"flex justify-between"},Ct={class:"flex items-center text-9xl"},At=e("div",{class:"flex flex-col items-end gap-y-8"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-9 w-9",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),e("p",{class:"font-medium leading-5 tracking-wider text-right uppercase"},[p("Today's "),e("br"),p("Appointments ")])],-1),Pt=e("span",{class:"sr-only"},"Today's Appointments",-1),Vt={class:"px-6 mx-auto max-w-7xl lg:px-8"},Mt=e("div",{class:"mx-auto mt-6 sm:px-6 lg:px-8"},[e("p",{class:"text-xl font-medium"},"Appointment Calendar"),e("p",null,"Here is an overview of your appointments.")],-1),zt={class:"py-8 mx-auto max-w-7xl sm:px-6 lg:px-8 md:flex gap-x-4"},$t={class:"flex-1 w-full"},Et={class:"py-10"},Tt={class:"px-6 mx-auto max-w-7xl lg:px-8"},jt={class:"overflow-x-auto shadow-sm sm:rounded-lg"},Lt={class:""},Ft={class:"pb-6 mx-auto bg-white border-gray-200 rounded-lg max-w-7xl sm:px-6 lg:px-8"},Ut=e("p",{class:"text-xl font-medium"},"All Appointments",-1),Dt=e("p",{class:"text-sm text-gray-700"},"Shown below are the appointments record",-1),Nt={class:"flex justify-between mb-6 mt-7 gap-x-2"},It=e("option",{value:"with"},"All Appointments",-1),Bt=e("option",{value:""},"Active Appointments",-1),Ot=e("option",{value:"only"},"Trashed Appointments",-1),Rt={class:"flex gap-x-2"},qt=p("Add Appointment"),Ht={class:"overflow-x-auto"},Wt={class:"min-w-full divide-y divide-gray-300"},Yt=e("thead",{class:"bg-gray-50"},[e("tr",{class:"[&>*]:uppercase font-medium text-xs text-gray-500"},[e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6"},"ID"),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"},"Status"),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"},"Patient "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"},"Email"),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"},"Schedule "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"},"Message "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"},"Sub Total "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"},"Payment Type"),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"},"Payment "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"},"Created On "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"},"Deleted On "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 sm:pl-6 text-left"},"Actions")])],-1),Gt={class:"bg-white divide-y divide-gray-200"},Kt={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},Xt={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},Jt={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},Qt={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},Zt={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},es={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},ts={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},ss={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},os={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},ls={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},as={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},ns={class:"relative py-4 pl-3 pr-4 text-sm whitespace-nowrap sm:pr-6"},rs=p("Details"),is=p("Update"),cs=p("Certificate"),ds=p("Prescription"),ps=p("View Prescription"),us=p("View Receipt"),ms=p("View Receipt"),_s=p("Payment"),fs=p("Trash"),hs={key:0},vs=e("td",{colspan:"11"},[e("div",{class:"py-4 mx-auto font-medium text-center text-gray-600"},"No data available ..")],-1),ys=[vs],xs={class:"mt-2 text-sm text-gray-500"},gs=e("p",{class:"text-xl font-bold"},"Appointment Information",-1),ws=e("p",{class:"text-sm text-gray-600"},"Here are the informations for this appointment",-1),bs=e("p",{class:"mt-3 mb-2"},"Patient Information",-1),Ss={class:"text-sm"},ks={class:"text-sm"},Cs={class:"text-sm"},As=e("p",{class:"mt-4 mb-2"},"Appointment Information",-1),Ps={class:"text-sm"},Vs={class:"text-sm"},Ms={class:"text-sm"},zs=e("p",{class:"mt-4 mb-2"},"Services Selected",-1),$s=p("Close"),Es=p("Mark as Finished"),Ts=p("Approve"),js=e("p",{class:"text-xl font-bold"},"Confirm Delete",-1),Ls=e("p",{class:"text-sm text-gray-600"},"Are you sure you want to move this appointment to trash? Once moved to trash the appointment status will be marked as cancelled and cannot be restored.",-1),Fs=p("Close"),Us=p("Confirm"),Ds=e("p",{class:"text-xl font-bold"},"Prescription",-1),Ns=e("p",{class:"text-sm font-regular"},"Enter your prescription for this appointment",-1),Is={action:"",class:"mt-2"},Bs=p("Close"),Os=p("Save"),Rs=e("p",{class:"text-xl font-bold"},"Payment Transaction",-1),qs=e("p",{class:"mt-1 text-sm text-gray-500"},"We do not store any credit card informations. All transactions are processed by Stripe.",-1),Hs={key:0},Ws=e("p",{class:"mt-4 mb-1 font-medium text-center text-gray-500"},"Loading Secure Payment ...",-1),Ys=[Ws],Gs=e("p",{class:"mt-1 mb-2"},"Credit Card Information",-1),Ks=e("div",{id:"card-element",class:"[&>*]:border-gray-500 border-2 p-3 rounded-md mb-4"},null,-1),Xs=[Gs,Ks],Js=p("Close"),Qs=e("p",{class:"text-xl font-bold"},"Accept Payment",-1),Zs=e("p",{class:"mt-1 text-sm text-gray-500"},"Please fill-in all the fields in the form.",-1),eo=p("Close"),to={class:"text-xl font-bold"},so=e("p",null,"Please fill-in all fields.",-1),oo={class:"flex flex-col"},lo=e("p",{class:"mt-2 text-sm"},"Select Service",-1),ao={class:"flex flex-col option__desc"},no={class:"option__title"},ro={class:"text-sm"},io={key:0,class:"mt-1 text-sm text-red-500"},co={key:1},po=e("p",{class:"mt-2 text-sm"},"Select Patient",-1),uo={key:0,class:"mt-1 text-sm text-red-500"},mo={class:"mt-2"},_o=p("Close"),fo=p("Save Appointment"),ho=e("p",{class:"text-xl font-bold"},"Confirm Restore",-1),vo=e("p",{class:"text-sm text-gray-600"},"Are you sure you want to restore this scheduled appointment? This might cause conflicts to some of the schedules.",-1),yo=p("Close"),xo=p("Restore"),To={__name:"Appointments",props:{appointments:Object,errors:Object,filters:Object,trashedAppointmentsCount:Number,todaysAppointment:Number,services:Object,users:Object},setup(r){const i=r,f=ve(()=>{var o;return(o=te().props.value.errors.error)!=null?o:"Something went wrong"}),v=ve(()=>{var o;return(o=te().props.value.flash.success)!=null?o:"Success"});let x,P,A=b(!1);Oe(async()=>{P=await ct.loadStripe(te().props.value.stripe.public_key),x=P.elements().create("card",{classes:{base:"p-2 border-gray-500"}})});const Me=async()=>{z.subtotal=c.value.subtotal,z.appointment_id=c.value.id,c.value.subtotal>z.amount_tendered?g.error("Insufficient amount is received"):(A.value=!0,z.transform(o=>({...o,change:o.amount_tendered-o.subtotal})).post(route("payment-branch.store"),{onError:()=>{g.error("Something went wrong")},onSuccess:()=>{g.success(v.value),Z()}})),A.value=!1},ze=async()=>{A.value=!0;const{paymentMethod:o,error:a}=await P.createPaymentMethod("card",x,{billing_details:{name:c.value.patient.full_name,email:c.value.patient.email,address:{line1:c.value.patient.address}}});a?g.error(a.message):(c.value.paymentMethodId=o.id,R.Inertia.post(route("payment.store"),c.value,{onError:()=>{g.error("Something went wrong")},onSuccess:()=>{g.success(v.value),re()}})),A.value=!1},g=Re(),ne={appointment_id:null,prescription:"",note:""};let C=se({...ne});const z=se({id:null,subtotal:null,change:null,appointment_id:null,amount_tendered:0});let m=se({id:null,service:null,price:null,subtotal:0,selected_services:[],user_id:null,message:"",schedule:""});const c=b({id:null,message:null,schedule:null,patient:{first_name:null,last_name:null}}),E=b(!1),G=b(!1),K=b(!1),X=b(!1),V=b(!1),T=b(!1),J=b(!1),j=b(!1),Q=b(!1),$e=qe(m,"selected_services"),re=o=>{T.value=!0,o?j.value=!j.value:(V.value=!V.value,V.value&&setTimeout(()=>{T.value=!1,x.mount("#card-element")},1200))},L=()=>{J.value=!J.value},N=(o={...ne})=>{C.appointment_id=o.id,Q.value=!Q.value},ie=()=>{V.value=!V.value,V.value&&setTimeout(()=>{T.value=!1,x.mount("#card-element")},1200)},Z=()=>{j.value=!j.value},I=()=>{K.value=!K.value},ee=()=>{X.value=!X.value},$=(o=null)=>{var a;o!=null&&(m.message=o.message,m.id=o.id,m.user_id=o.patient,m.selected_services=(a=o.services)==null?void 0:a.map(B=>B.service),m.schedule=tt(o.schedule).format("YYYY-MM-DDThh:mm")),G.value=!G.value},Ee=()=>{E.value?De():Ne()},Te=()=>{C.post(route("prescription.store"),{onError:()=>{g.error("Something went wrong")},onSuccess:()=>{g.success("Appointment prescription has been saved!"),N(),C.appointment_id=null,C.prescription=null,C.note=null}})},je=()=>{R.Inertia.delete(`/appointments/${c.value.id}`,{preserveState:!0,onSuccess:()=>{g.success("Appointment has been moved to trash successfully!"),I()}})},Le=()=>{m.put(`/appointments/restore/${c.value.id}`,{preserveState:!0,onSuccess:()=>{g.success("Appointment has been restored successfully!"),ee()}})},Fe=()=>{m.put(`/appointments/approve/${c.value.id}`,{preserveState:!0,onError:()=>{g.error("Something went wrong")},onSuccess:()=>{g.success("Appointment has been approved successfully!"),L()}})},Ue=()=>{m.put(`/appointments/finished/${c.value.id}`,{preserveState:!0,onError:()=>{g.error("Something went wrong")},onSuccess:()=>{g.success("Appointment has been marked as finished"),L()}})},De=()=>{m.transform(o=>{var a;return{...o,user_id:(a=o==null?void 0:o.user_id)==null?void 0:a.id}}).post("/appointments",{preserveState:!0,onError:o=>{g.error(`${f.value}`)},onSuccess:()=>{g.success("Appointment created successfully!"),$(),m.reset()}})},Ne=()=>{m.transform(o=>{var a;return{...o,user_id:(a=o==null?void 0:o.user_id)==null?void 0:a.id}}).put(`/appointments/${m.id}`,{preserveState:!0,onError:o=>{g.error(`${f.value}`)},onSuccess:()=>{g.success("Appointment update successfully!"),$(),m.reset()}})};He($e,()=>{var o;m.subtotal=0,(o=m.selected_services)==null||o.map(a=>{m.subtotal+=parseFloat(a.price)})});let F=b(i.filters.search),U=b(i.filters.trashed);const ce=ye.exports.debounce(()=>{R.Inertia.get("/appointments",{search:F.value,trashed:U.value},{preserveState:!0})},300),Ie=ye.exports.debounce(o=>{R.Inertia.get("/appointments",{search:o},{preserveState:!0,only:["users"]})},300);return(o,a)=>(u(),S(oe,null,[l(n(We),{title:"Patient Appointments"}),l(Xe,null,{default:s(()=>{var B,de,pe;return[e("div",dt,[pt,e("div",ut,[e("div",mt,[e("div",_t,[e("div",ft,d(n(le)(r.trashedAppointmentsCount)),1),ht]),vt]),e("div",yt,[e("div",xt,[e("div",gt,d(n(le)(r.appointments.data.length)),1),wt]),bt]),e("div",St,[e("div",kt,[e("div",Ct,d(n(le)(r.todaysAppointment)),1),At]),Pt])])]),e("div",Vt,[Mt,e("div",zt,[e("div",$t,[l(Qe,{data:r.appointments.data},null,8,["data"])])])]),e("div",Et,[e("div",Tt,[e("div",jt,[e("div",Lt,[e("div",Ft,[Ut,Dt,e("div",Nt,[l(k,{label:"Filter Service",class:"w-48"},{default:s(()=>[l(Je,{onChange:n(ce),modelValue:n(U),"onUpdate:modelValue":a[0]||(a[0]=t=>xe(U)?U.value=t:U=t)},{default:s(()=>[It,Bt,Ot]),_:1},8,["onChange","modelValue"])]),_:1}),e("div",Rt,[l(_,{onClick:a[1]||(a[1]=y(t=>{E.value=!0,$()},["prevent"])),size:"sm",color:"success"},{default:s(()=>[qt]),_:1}),l(k,{label:"Search Appointment",for:"search"},{default:s(()=>[l(D,{modelValue:n(F),"onUpdate:modelValue":a[2]||(a[2]=t=>xe(F)?F.value=t:F=t),id:"search",onKeyup:n(ce)},null,8,["modelValue","onKeyup"])]),_:1})])]),e("div",Ht,[e("table",Wt,[Yt,e("tbody",Gt,[(u(!0),S(oe,null,ge(r.appointments.data,(t,Be)=>{var ue,me,_e,fe,he;return u(),S("tr",{key:Be,class:Ye(["hover:bg-gray-200",{"bg-red-100":t.deleted_at}])},[e("td",Kt,d(t.id),1),e("td",Xt,[l(we,{label:t.appointment_status,color:n(be)(t.appointment_status)},null,8,["label","color"])]),e("td",Jt,d(t.patient.full_name),1),e("td",Qt,d(t.patient.email),1),e("td",Zt,d(t.schedule),1),e("td",es,d(n(et)(t.message)),1),e("td",ts,d(n(H)(t.subtotal)),1),e("td",ss,d((me=(ue=t.payment)==null?void 0:ue.payment_type)!=null?me:"N/A"),1),e("td",os,[l(we,{label:t.payment_status,color:n(be)(t.payment_status)},null,8,["label","color"])]),e("td",ls,d(t.created_at),1),e("td",as,d(t.deleted_at),1),e("td",ns,[l(_,{text:"",size:"sm",onClick:O=>{L(),c.value=t}},{default:s(()=>[rs]),_:2},1032,["onClick"]),!t.deleted_at&&t.appointment_status!="Finished"&&t.appointment_status!="Approved"&&!o.$page.props.auth.user.is_admin?(u(),w(_,{key:0,onClick:O=>{E.value=!1,$(t)},text:"",size:"sm",color:"success"},{default:s(()=>[is]),_:2},1032,["onClick"])):h("",!0),(o.$page.props.auth.user.is_admin||t.payment_status!=="Pending")&&!t.deleted_at&&t.appointment_status=="Approved"?(u(),w(_,{key:1,"is-link":"",href:o.route("certificate.generate",t.id),text:"",size:"sm",color:"success"},{default:s(()=>[cs]),_:2},1032,["href"])):h("",!0),o.$page.props.auth.user.is_admin?(u(),w(_,{key:2,onClick:y(O=>N(t),["prevent"]),text:"",size:"sm",color:"success"},{default:s(()=>[ds]),_:2},1032,["onClick"])):h("",!0),!o.$page.props.auth.user.is_admin&&t.payment_status=="Paid"?(u(),w(_,{key:3,text:"",size:"sm",color:"success"},{default:s(()=>[ps]),_:1})):h("",!0),((_e=t.payment)==null?void 0:_e.payment_type)=="Stripe"&&t.payment_status=="Paid"?(u(),w(_,{key:4,color:"success","is-link":"",text:"",size:"sm",href:(fe=t.payment)==null?void 0:fe.receipt_url,target:"_"},{default:s(()=>[us]),_:2},1032,["href"])):h("",!0),((he=t.payment)==null?void 0:he.payment_type)=="On-Branch"&&t.payment_status=="Paid"?(u(),w(_,{key:5,"is-link":"",href:o.route("invoice.generate",t.id),text:"",size:"sm",color:"success"},{default:s(()=>[ms]),_:2},1032,["href"])):h("",!0),!t.deleted_at&&t.payment_status!="Paid"&&(t.appointment_status=="Approved"||t.appointment_status=="Finished")?(u(),w(_,{key:6,onClick:y(O=>{re(o.$page.props.auth.user.is_admin),c.value={...t}},["prevent"]),text:"",size:"sm",color:""},{default:s(()=>[_s]),_:2},1032,["onClick"])):h("",!0),t.deleted_at?h("",!0):(u(),w(_,{key:7,onClick:y(O=>{I(),c.value=t},["prevent"]),text:"",size:"sm",color:"error"},{default:s(()=>[fs]),_:2},1032,["onClick"]))])],2)}),128)),r.appointments.data.length==0?(u(),S("tr",hs,ys)):h("",!0)])])]),e("p",xs,"Showing "+d((B=r.appointments.from)!=null?B:0)+" to "+d((de=r.appointments.to)!=null?de:0)+" out of "+d((pe=r.appointments.total)!=null?pe:0)+" appointments.",1),l(Ze,{links:r.appointments.links,right:""},null,8,["links"])])])])])]),J.value?(u(),w(M,{key:0,onClose:L},{title:s(()=>[gs,ws]),body:s(()=>[bs,e("p",Ss,"Full Name: "+d(c.value.patient.full_name),1),e("p",ks,"Email: "+d(c.value.patient.email),1),e("p",Cs,"Gender: "+d(c.value.patient.gender),1),As,e("p",Ps,"Schedule: "+d(c.value.schedule),1),e("p",Vs,"Message: "+d(c.value.message),1),e("p",Ms,"Created: "+d(c.value.created_at),1),zs,(u(!0),S(oe,null,ge(c.value.services,t=>(u(),S("p",{class:"text-sm",key:t.id},d(t.service.service)+" - "+d(n(H)(t.service.price)),1))),128))]),footer:s(()=>[l(_,{onClick:y(L,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[$s]),_:1},8,["onClick"]),c.value.deleted_at==null&&c.value.appointment_status=="Approved"&&c.value.appointment_status!="Cancelled"&&o.$page.props.auth.user.is_admin?(u(),w(_,{key:0,onClick:y(Ue,["prevent"]),text:"",size:"sm",color:"success"},{default:s(()=>[Es]),_:1},8,["onClick"])):h("",!0),c.value.deleted_at==null&&c.value.appointment_status=="Pending"&&c.value.appointment_status!="Cancelled"&&o.$page.props.auth.user.is_admin?(u(),w(_,{key:1,onClick:y(Fe,["prevent"]),text:"",size:"sm",color:"success"},{default:s(()=>[Ts]),_:1},8,["onClick"])):h("",!0)]),_:1})):h("",!0),K.value?(u(),w(M,{key:1,onClose:I},{title:s(()=>[js]),body:s(()=>[Ls]),footer:s(()=>[l(_,{onClick:y(I,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[Fs]),_:1},8,["onClick"]),l(_,{onClick:y(je,["prevent"]),text:"",size:"sm",color:"error"},{default:s(()=>[Us]),_:1},8,["onClick"])]),_:1})):h("",!0),Q.value?(u(),w(M,{key:2,onClose:N},{title:s(()=>[Ds,Ns]),body:s(()=>[e("form",Is,[l(k,{label:"Prescription",for:"prescription",class:"mt-3",error:r.errors.prescription},{default:s(()=>[l(q,{modelValue:n(C).prescription,"onUpdate:modelValue":a[3]||(a[3]=t=>n(C).prescription=t),id:"prescription",required:"","aria-required":""},null,8,["modelValue"])]),_:1},8,["error"]),l(k,{label:"Additional Note",for:"prescription-additional",class:"mt-3",error:r.errors.note},{default:s(()=>[l(q,{modelValue:n(C).note,"onUpdate:modelValue":a[4]||(a[4]=t=>n(C).note=t),id:"prescription-additional",required:"","aria-required":""},null,8,["modelValue"])]),_:1},8,["error"])])]),footer:s(()=>[l(_,{onClick:y(N,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[Bs]),_:1},8,["onClick"]),l(_,{onClick:y(Te,["prevent"]),text:"",size:"sm",color:"success"},{default:s(()=>[Os]),_:1},8,["onClick"])]),_:1})):h("",!0),V.value?(u(),w(M,{key:3,onClose:ie},{title:s(()=>[Rs,qs]),body:s(()=>[T.value?(u(),S("div",Hs,Ys)):h("",!0),Ge(e("div",null,Xs,512),[[Ke,!T.value]]),l(k,{for:"payment_fname",error:r.errors.schedule,label:"Full Name",class:"mt-1 mb-3"},{default:s(()=>[l(D,{disabled:"",type:"text",id:"payment_fname",modelValue:c.value.patient.full_name,"onUpdate:modelValue":a[5]||(a[5]=t=>c.value.patient.full_name=t),"aria-disabled":""},null,8,["modelValue"])]),_:1},8,["error"]),l(k,{for:"payment_fname",error:r.errors.schedule,label:"Address",class:"mt-3 mb-3"},{default:s(()=>[l(q,{type:"text",id:"payment_fname",modelValue:c.value.patient.address,"onUpdate:modelValue":a[6]||(a[6]=t=>c.value.patient.address=t),disabled:"","aria-disabled":""},null,8,["modelValue"])]),_:1},8,["error"])]),footer:s(()=>[l(_,{onClick:y(ie,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[Js]),_:1},8,["onClick"]),l(_,{onClick:y(ze,["prevent"]),text:"",size:"sm",color:"success",disabled:n(A)},{default:s(()=>[p(d(n(A)?"Processing..":"Proceed"),1)]),_:1},8,["onClick","disabled"])]),_:1})):h("",!0),j.value?(u(),w(M,{key:4,onClose:Z},{title:s(()=>[Qs,Zs]),body:s(()=>[l(k,{for:"payment_fname",error:r.errors.schedule,label:"Amount Tendered",class:"mt-3 mb-3"},{default:s(()=>[l(D,{type:"number",id:"amounttendered",modelValue:n(z).amount_tendered,"onUpdate:modelValue":a[7]||(a[7]=t=>n(z).amount_tendered=t)},null,8,["modelValue"])]),_:1},8,["error"]),l(k,{for:"subtotal",error:r.errors.subtotal,label:"Subtotal",class:"mt-3 mb-3"},{default:s(()=>[l(D,{type:"number",id:"subtotal",modelValue:c.value.subtotal,"onUpdate:modelValue":a[8]||(a[8]=t=>c.value.subtotal=t),disabled:"","aria-disabled":""},null,8,["modelValue"])]),_:1},8,["error"])]),footer:s(()=>[l(_,{onClick:y(Z,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[eo]),_:1},8,["onClick"]),l(_,{onClick:y(Me,["prevent"]),text:"",size:"sm",color:"success",disabled:n(A)},{default:s(()=>[p(d(n(A)?"Processing..":"Proceed Payment"),1)]),_:1},8,["onClick","disabled"])]),_:1})):h("",!0),G.value?(u(),w(M,{key:5,onClose:$},{title:s(()=>[e("p",to,d(E.value?"New Appointment":"Update Appointment"),1),so]),body:s(()=>[e("form",oo,[l(k,{for:"appointment",error:r.errors.schedule,label:"Date and Time",class:"mt-3"},{default:s(()=>[l(D,{type:"datetime-local",id:"appointment",modelValue:n(m).schedule,"onUpdate:modelValue":a[9]||(a[9]=t=>n(m).schedule=t)},null,8,["modelValue"])]),_:1},8,["error"]),l(k,{for:"message",error:r.errors.message,label:"Message",class:"mt-2"},{default:s(()=>[l(q,{id:"message",modelValue:n(m).message,"onUpdate:modelValue":a[10]||(a[10]=t=>n(m).message=t)},null,8,["modelValue"])]),_:1},8,["error"]),lo,l(n(Se),{modelValue:n(m).selected_services,"onUpdate:modelValue":a[11]||(a[11]=t=>n(m).selected_services=t),options:r.services,multiple:!0,class:"border-2 border-gray-500 rounded-lg",selectLabel:"Select",deselectLabel:"Deselect",label:"service","track-by":"id"},{option:s(t=>[e("div",ao,[e("span",no,d(t.option.service),1),e("span",ro,d(n(H)(t.option.price)),1)])]),_:1},8,["modelValue","options"]),r.errors.selected_services?(u(),S("p",io,d(r.errors.selected_services),1)):h("",!0),o.$page.props.auth.user.is_admin?(u(),S("div",co,[po,l(n(Se),{modelValue:n(m).user_id,"onUpdate:modelValue":a[12]||(a[12]=t=>n(m).user_id=t),onSearchChange:n(Ie),options:r.users,multiple:!1,class:"border-2 border-gray-500 rounded-lg",selectLabel:"Select",deselectLabel:"Deselect",label:"full_name","track-by":"id",disabled:!E.value},null,8,["modelValue","onSearchChange","options","disabled"]),r.errors.user_id?(u(),S("p",uo,d(r.errors.user_id),1)):h("",!0)])):h("",!0),e("p",mo,"Subtotal: "+d(n(H)(n(m).subtotal)),1)])]),footer:s(()=>[l(_,{onClick:y($,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[_o]),_:1},8,["onClick"]),l(_,{onClick:y(Ee,["prevent"]),text:"",size:"sm",color:"success"},{default:s(()=>[fo]),_:1},8,["onClick"])]),_:1})):h("",!0),X.value?(u(),w(M,{key:6,onClose:ee},{title:s(()=>[ho]),body:s(()=>[vo]),footer:s(()=>[l(_,{onClick:y(ee,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[yo]),_:1},8,["onClick"]),l(_,{onClick:y(Le,["prevent"]),text:"",size:"sm",color:"success"},{default:s(()=>[xo]),_:1},8,["onClick"])]),_:1})):h("",!0)]}),_:1})],64))}};export{To as default};
