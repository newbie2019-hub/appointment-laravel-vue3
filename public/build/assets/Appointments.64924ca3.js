import{c as re,r as b,u as Ze,a as ie,t as et,w as tt,l as we,d as W,o as p,b as A,e as a,f as n,H as st,g as s,F as de,h as be,i as e,j as m,k as ke,m as x,n as Se,p as ot,q as f,s as h,v as lt,x as at,y as c}from"./app.00439c91.js";import{_ as nt}from"./Authenticated.a42a738f.js";import{_}from"./Button.b7006ce7.js";import{_ as S,a as I}from"./Modal.vue_vue_type_style_index_0_lang.13ba25eb.js";import{_ as Ce}from"./FloatingSelect.ace9318b.js";import{_ as B}from"./FloatingTextArea.7e1fb0f3.js";import{_ as Ae}from"./Chip.c879e49c.js";import{P as rt}from"./Pagination.19852769.js";import{_ as it}from"./Calendar.91ef27a7.js";import{_ as V}from"./Modal.f877938c.js";import{_ as Pe}from"./HealthForm.5715d090.js";import{f as ce,c as Ve,s as dt,a as G}from"./Utilities.5f54765f.js";import{s as Me}from"./vue-multiselect.esm.1556e669.js";import{v as ct}from"./main.7b092964.js";import{h as z}from"./moment.9709ab41.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./Radio.00e3ea14.js";var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});function X(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?X=function(d){return typeof d}:X=function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},X(i)}var qe="https://js.stripe.com/v3",ut=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,De="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",pt=function(){for(var d=document.querySelectorAll('script[src^="'.concat(qe,'"]')),v=0;v<d.length;v++){var g=d[v];if(!!ut.test(g.src))return g}return null},mt=function(d){var v=d&&!d.advancedFraudSignals?"?advancedFraudSignals=false":"",g=document.createElement("script");g.src="".concat(qe).concat(v);var w=document.head||document.body;if(!w)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return w.appendChild(g),g},_t=function(d,v){!d||!d._registerWrapper||d._registerWrapper({name:"stripe-js",version:"1.35.0",startTime:v})},K=null,ht=function(d){return K!==null||(K=new Promise(function(v,g){if(typeof window=="undefined"){v(null);return}if(window.Stripe&&d&&console.warn(De),window.Stripe){v(window.Stripe);return}try{var w=pt();w&&d?console.warn(De):w||(w=mt(d)),w.addEventListener("load",function(){window.Stripe?v(window.Stripe):g(new Error("Stripe.js not available"))}),w.addEventListener("error",function(){g(new Error("Failed to load Stripe.js"))})}catch(E){g(E);return}})),K},ft=function(d,v,g){if(d===null)return null;var w=d.apply(void 0,v);return _t(w,g),w},vt=function(d){var v=`invalid load parameters; expected object of shape

    {advancedFraudSignals: boolean}

but received

    `.concat(JSON.stringify(d),`
`);if(d===null||X(d)!=="object")throw new Error(v);if(Object.keys(d).length===1&&typeof d.advancedFraudSignals=="boolean")return d;throw new Error(v)},ze,Ee=!1,$e=function(){for(var d=arguments.length,v=new Array(d),g=0;g<d;g++)v[g]=arguments[g];Ee=!0;var w=Date.now();return ht(ze).then(function(E){return ft(E,v,w)})};$e.setLoadParameters=function(i){if(Ee)throw new Error("You cannot change load parameters after calling loadStripe");ze=vt(i)};Fe.loadStripe=$e;const yt={class:"px-6 max-w-8xl lg:px-8"},xt=e("div",{class:"mx-auto mt-6 sm:px-6 lg:px-8"},[e("p",{class:"text-xl font-medium"},"Appointment Summary"),e("p",null,"Here is an overview of your appointments.")],-1),gt={class:"flex flex-wrap py-8 max-w-8xl sm:px-6 lg:px-8 gap-x-4 md:flex-row gap-y-4"},wt={class:"flex-1 p-4 text-white bg-red-500 rounded-md"},bt={class:"flex justify-between"},kt={class:"flex items-center text-9xl"},St=e("div",{class:"flex flex-col items-end gap-y-8"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-10 h-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})]),e("p",{class:"font-medium leading-5 tracking-wider text-right uppercase"},[c(" Trashed "),e("br"),c("Appointments ")])],-1),Ct=e("span",{class:"sr-only"},"Trashed Appointments",-1),At={class:"flex-1 p-4 text-white bg-green-600 rounded-md"},Pt={class:"flex justify-between"},Vt={class:"flex items-center text-9xl"},Mt=e("div",{class:"flex flex-col items-end gap-y-8"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-10 h-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),e("p",{class:"font-medium leading-5 tracking-wider text-right uppercase"},[c(" Total "),e("br"),c("Appointments ")])],-1),Dt=e("span",{class:"sr-only"},"Total Appointments",-1),Ft={class:"flex-1 p-4 text-white bg-blue-600 rounded-md"},qt={class:"flex justify-between"},zt={class:"flex items-center text-9xl"},Et=e("div",{class:"flex flex-col items-end gap-y-8"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-9 w-9",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),e("p",{class:"font-medium leading-5 tracking-wider text-right uppercase"},[c(" Today's "),e("br"),c("Appointments ")])],-1),$t=e("span",{class:"sr-only"},"Today's Appointments",-1),Tt={class:"px-6 max-w-8xl lg:px-8"},Nt=e("div",{class:"mx-auto mt-6 sm:px-6 lg:px-8"},[e("p",{class:"text-xl font-medium"},"Appointment Calendar"),e("p",null,"Here is an overview of your appointments.")],-1),jt={class:"py-8 mx-auto max-w-8xl sm:px-6 lg:px-8 md:flex gap-x-4"},Ut={class:"flex-1 w-full"},Lt={class:"py-10"},It={class:"px-6 max-w-8xl lg:px-8"},Bt={class:"overflow-x-auto sm:rounded-lg"},Ot={class:""},Ht={class:"pb-6 mx-auto bg-white border-gray-200 rounded-lg max-w-8xl sm:px-6 lg:px-8"},Yt=e("p",{class:"text-xl font-medium"},"All Appointments",-1),Rt=e("p",{class:"text-sm text-gray-700"}," Shown below are the appointments record ",-1),Wt={class:"flex justify-between mb-6 mt-7 gap-x-2"},Gt=e("option",{value:"with"}," All Appointments ",-1),Kt=e("option",{value:""}," Active Appointments ",-1),Xt=e("option",{value:"only"}," Trashed Appointments ",-1),Jt=e("option",{value:"pending"}," Pending Appointments ",-1),Qt=e("option",{value:"approved"}," Approved Appointments ",-1),Zt=e("option",{value:"declined"}," Declined Appointments ",-1),es=e("option",{value:"finished"}," Finished Appointments ",-1),ts={class:"flex gap-x-2"},ss=c("Add Appointment"),os={class:"overflow-x-auto"},ls={class:"min-w-full divide-y divide-gray-300"},as=e("thead",{class:"bg-gray-50"},[e("tr",{class:"[&>*]:uppercase font-medium text-xs text-gray-500"},[e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6"}," ID "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"}," Status "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"}," Patient "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"}," Email "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"}," Schedule "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"}," Message "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"}," Total "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"}," Payment Type "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"}," Payment "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"}," Created On "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left sm:pl-6 whitespace-nowrap"}," Deleted On "),e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 sm:pl-6 text-left"}," Actions ")])],-1),ns={class:"bg-white divide-y divide-gray-200"},rs={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},is={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 whitespace-nowrap sm:pl-6"},ds={class:"py-4 pl-4 pr-3 text-sm text-gray-900 whitespace-nowrap sm:pl-6"},cs={class:"py-4 pl-4 pr-3 text-sm text-gray-900 whitespace-nowrap sm:pl-6"},us={class:"py-4 pl-4 pr-3 text-sm text-gray-900 whitespace-nowrap sm:pl-6"},ps={class:"py-4 pl-4 pr-3 text-sm text-gray-900 sm:pl-6"},ms={class:"py-4 pl-4 pr-3 text-sm text-gray-900 whitespace-nowrap sm:pl-6"},_s={class:"py-4 pl-4 pr-3 text-sm text-gray-900 whitespace-nowrap sm:pl-6"},hs={class:"py-4 pl-4 pr-3 text-sm text-gray-900 whitespace-nowrap sm:pl-6"},fs={class:"py-4 pl-4 pr-3 text-sm text-gray-900 whitespace-nowrap sm:pl-6"},vs={class:"py-4 pl-4 pr-3 text-sm text-gray-900 whitespace-nowrap sm:pl-6"},ys={class:"relative py-4 pl-3 pr-4 text-sm whitespace-nowrap sm:pr-6"},xs=c("Details"),gs=c("Decline"),ws=c("Health Form"),bs=c("Update"),ks=c("Certificate"),Ss=c("Prescription"),Cs=c("View Prescription"),As=c("View Receipt"),Ps=c("View Invoice"),Vs=c("Payment"),Ms=c("Trash"),Ds={key:0},Fs=e("td",{colspan:"11"},[e("div",{class:"py-4 mx-auto font-medium text-center text-gray-600"}," No data available .. ")],-1),qs=[Fs],zs={class:"mt-2 text-sm text-gray-500"},Es=e("p",{class:"text-xl font-bold"},"Appointment Information",-1),$s=e("p",{class:"text-sm text-gray-600"}," Here are the informations for this appointment ",-1),Ts=e("p",{class:"mt-3 mb-2 font-medium"},"Patient Information",-1),Ns={class:"text-sm"},js={class:"text-sm"},Us={class:"text-sm"},Ls=e("p",{class:"mt-4 mb-2 font-medium"},"Appointment Information",-1),Is={class:"text-sm"},Bs={class:"text-sm"},Os={class:"text-sm"},Hs=e("p",{class:"mt-4 mb-2 font-medium"},"Services Selected",-1),Ys=c("Close"),Rs=c("Mark as Finished"),Ws=c("Approve"),Gs=e("p",{class:"text-xl font-bold"},"Confirm Decline",-1),Ks=e("p",{class:"text-sm text-gray-600"}," Are you sure you want to decline this appointment? The patient will be notified that his/her appointment was declined. ",-1),Xs=c("Close"),Js=c("Decline"),Qs=e("p",{class:"text-xl font-bold"},"Confirm Delete",-1),Zs=e("p",{class:"text-sm text-gray-600"}," Are you sure you want to move this appointment to trash? Once moved to trash the appointment status will be marked as cancelled and cannot be restored. ",-1),eo=c("Close"),to=c("Confirm"),so=e("p",{class:"text-xl font-bold"},"Prescription",-1),oo=e("p",{class:"text-sm font-regular"}," Enter your prescription for this appointment ",-1),lo={action:"",class:"mt-2"},ao=c("Close"),no=c("Save"),ro=e("p",{class:"text-xl font-bold"},"Payment Transaction",-1),io=e("p",{class:"mt-1 text-sm text-gray-500"}," We do not store any credit card informations. All transactions are processed by Stripe. ",-1),co={key:0},uo=e("p",{class:"mt-4 mb-1 font-medium text-center text-gray-500"}," Loading Secure Payment ... ",-1),po=[uo],mo=e("p",{class:"mt-1 mb-2"},"Credit Card Information",-1),_o=e("div",{id:"card-element",class:"[&>*]:border-gray-500 border-2 p-3 rounded-md mb-4"},null,-1),ho=[mo,_o],fo=c("Close"),vo=e("p",{class:"text-xl font-bold"},"Accept Payment",-1),yo=e("p",{class:"mt-1 text-sm text-gray-500"}," Please fill-in all the fields in the form. ",-1),xo=e("option",{value:"0"},"Full Payment",-1),go=e("option",{value:"1"},"Partial Payment",-1),wo=c("Close"),bo={class:"text-xl font-bold"},ko=e("p",null,"Please fill-in all fields.",-1),So={class:"flex flex-col"},Co=e("p",{class:"mt-2 text-sm"},"Select Service",-1),Ao={class:"flex flex-col option__desc"},Po={class:"option__title"},Vo={class:"text-sm"},Mo={key:0,class:"mt-1 text-sm text-red-500"},Do={key:1},Fo=e("p",{class:"mt-2 text-sm"},"Select Patient",-1),qo={key:0,class:"mt-1 text-sm text-red-500"},zo={class:"mt-2"},Eo=c("Close"),$o=c("Save Appointment"),To=c("Update Appointment"),No=e("p",{class:"text-xl font-bold"},"Confirm Restore",-1),jo=e("p",{class:"text-sm text-gray-600"}," Are you sure you want to restore this scheduled appointment? This might cause conflicts to some of the schedules. ",-1),Uo=c("Close"),Lo=c("Restore"),ll={__name:"Appointments",props:{appointments:Object,appointmentCalendar:Object,errors:Object,filters:Object,trashedAppointmentsCount:Number,todaysAppointment:Number,services:Object,users:Object},setup(i){const d=i,v=re(()=>{var o;return(o=be().props.value.errors.error)!=null?o:"Something went wrong"}),g=re(()=>{var o;return(o=be().props.value.flash.success)!=null?o:"Success"});let w,E,P=b(!1);b(!1);const $=()=>oe.value=!oe.value,ue=()=>le.value=!le.value,Te=async()=>{var o;if(k.subtotal=r.value.subtotal,k.appointment_id=r.value.id,!parseInt(k.is_installment)&&parseFloat(r.value.subtotal)+parseFloat((o=k.addons_amount)!=null?o:0)>k.amount_tendered)return y.error("Insufficient amount is received");P.value=!0,k.transform(l=>({...l,change:l.amount_tendered-l.subtotal})).post(route("payment-branch.store"),{onError:()=>{y.error("Something went wrong")},onSuccess:()=>{y.success(g.value),ae()}}),P.value=!1},Ne=async()=>{P.value=!0;const{paymentMethod:o,error:l}=await E.createPaymentMethod("card",w,{billing_details:{name:r.value.patient.full_name,email:r.value.patient.email,address:{line1:r.value.patient.address}}});l?y.error(l.message):(r.value.paymentMethodId=o.id,W.Inertia.post(route("payment.store"),r.value,{onError:()=>{y.error("Something went wrong")},onSuccess:()=>{y.success(g.value),me()}})),P.value=!1},y=Ze(),pe={appointment_id:null,prescription:"",note:""};let C=ie({...pe});const k=ie({id:null,subtotal:null,change:null,appointment_id:null,amount_tendered:0,addons_amount:0,addons_note:"",is_installment:0});let u=ie({id:null,service:null,price:null,subtotal:0,selected_services:[],user_id:null,message:"",schedule:z().add(1,"days").toDate().setMinutes(0),date:"",healthFormData:{q1:"No",q2:"No",q3:"No",q4:"No",q5:"No"}});const r=b({id:null,message:null,schedule:null,patient:{first_name:null,last_name:null},healthFormData:{q1:"No",q2:"No",q3:"No",q4:"No",q5:"No"}}),D=b(!1),J=b(!1),Q=b(!1),Z=b(!1),ee=b(!1),M=b(!1),T=b(!1),te=b(!1),N=b(!1),se=b(!1),oe=b(!1),le=b(!1),je=et(u,"selected_services"),Ue=re(()=>{var o;return console.log(r.value.payments_sum_amount_tendered),parseFloat(r.value.subtotal)-parseFloat((o=r.value.payments_sum_amount_tendered)!=null?o:0)}),me=o=>{T.value=!0,o?N.value=!N.value:(M.value=!M.value,M.value&&setTimeout(()=>{T.value=!1,w.mount("#card-element")},1200))},j=()=>{te.value=!te.value},O=()=>{Q.value=!Q.value},H=(o=null,l={...pe})=>{C.appointment_id=o,C.note=l==null?void 0:l.note,C.prescription=l==null?void 0:l.prescription,se.value=!se.value},_e=()=>{M.value=!M.value,M.value&&setTimeout(()=>{T.value=!1,w.mount("#card-element")},1200)},ae=()=>{N.value=!N.value},Y=()=>{Z.value=!Z.value},ne=()=>{ee.value=!ee.value},F=(o=null)=>{var l;o!=null&&(u.message=o.message,u.id=o.id,u.user_id=o.patient,u.selected_services=(l=o.services)==null?void 0:l.map(R=>R.service),u.schedule=z(o.schedule).format("YYYY-MM-DDThh:mm")),J.value=!J.value},Le=o=>o.payments_sum_amount_tendered<o.subtotal,he=()=>{const o=new Date(u.schedule).getHours();if(o<10||o==12||o>16)return $(),y.error("Schedule selected is not part of our working hours!");D.value?We():Ge()},Ie=()=>{C.post(route("prescription.store"),{onError:()=>{y.error("Something went wrong")},onSuccess:()=>{y.success("Appointment prescription has been saved!"),H(),C.appointment_id=null,C.prescription=null,C.note=null}})},Be=()=>{W.Inertia.delete(`/appointments/${r.value.id}`,{preserveState:!0,onSuccess:()=>{y.success("Appointment has been moved to trash successfully!"),Y()}})},Oe=()=>{u.put(`/appointments/restore/${r.value.id}`,{preserveState:!0,onSuccess:()=>{y.success("Appointment has been restored successfully!"),ne()}})},He=()=>{u.put(`/appointments/approve/${r.value.id}`,{preserveState:!0,onError:()=>{y.error("Something went wrong")},onSuccess:()=>{y.success("Appointment has been approved successfully!"),j()}})},Ye=()=>{u.put(`/appointments/decline/${r.value.id}`,{preserveState:!0,onError:()=>{y.error("Something went wrong")},onSuccess:()=>{y.success("Appointment has been declined!"),O()}})},Re=()=>{u.put(`/appointments/finished/${r.value.id}`,{preserveState:!0,onError:()=>{y.error("Something went wrong")},onSuccess:()=>{y.success("Appointment has been marked as finished"),j()}})},We=()=>{if(u.healthFormData.q1==null||u.healthFormData.q2==null||u.healthFormData.q3==null||u.healthFormData.q4==null||u.healthFormData.q5==null)return y.error("Please answer all the questions");console.log("Submitted Schedule: ",u.schedule),u.transform(o=>{var l;return{...o,fixed_schedule:z(o.schedule).format(),user_id:(l=o==null?void 0:o.user_id)==null?void 0:l.id}}).post("/appointments",{preserveState:!0,onError:o=>{y.error(`${v.value}`),$()},onSuccess:()=>{y.success("Appointment created successfully!"),$(),F(),u.reset()}})},Ge=()=>{u.transform(o=>{var l;return{...o,user_id:(l=o==null?void 0:o.user_id)==null?void 0:l.id,fixed_schedule:z(o.schedule).format()}}).put(`/appointments/${u.id}`,{preserveState:!0,onError:o=>{y.error(`${v.value}`)},onSuccess:()=>{y.success("Appointment update successfully!"),F(),u.reset()}})},Ke=()=>{var o;u.subtotal=0,(o=u.selected_services)==null||o.map(l=>{u.subtotal+=parseFloat(l.price)})},Xe=o=>{console.log(o)};tt(je,Ke);let U=b(d.filters.search),L=b(d.filters.trashed);const fe=we.exports.debounce(()=>{W.Inertia.get("/appointments",{search:U.value,trashed:L.value},{preserveState:!0})},300),Je=we.exports.debounce(o=>{W.Inertia.get("/appointments",{search:o},{preserveState:!0,only:["users"]})},300);return(o,l)=>(p(),A(de,null,[a(n(st),{title:"Patient Appointments"}),a(nt,null,{default:s(()=>{var R,ve,ye;return[e("div",yt,[xt,e("div",gt,[e("div",wt,[e("div",bt,[e("div",kt,m(n(ce)(i.trashedAppointmentsCount)),1),St]),Ct]),e("div",At,[e("div",Pt,[e("div",Vt,m(n(ce)(i.appointments.data.length)),1),Mt]),Dt]),e("div",Ft,[e("div",qt,[e("div",zt,m(n(ce)(i.todaysAppointment)),1),Et]),$t])])]),e("div",Tt,[Nt,e("div",jt,[e("div",Ut,[a(it,{data:i.appointmentCalendar,onEmitEvent:Xe},null,8,["data"])])])]),e("div",Lt,[e("div",It,[e("div",Bt,[e("div",Ot,[e("div",Ht,[Yt,Rt,e("div",Wt,[a(S,{label:"Filter Appointment",class:"w-56"},{default:s(()=>[a(Ce,{onChange:n(fe),modelValue:n(L),"onUpdate:modelValue":l[0]||(l[0]=t=>ke(L)?L.value=t:L=t)},{default:s(()=>[Gt,Kt,Xt,Jt,Qt,Zt,es]),_:1},8,["onChange","modelValue"])]),_:1}),e("div",ts,[a(_,{onClick:l[1]||(l[1]=x(t=>{D.value=!0,F()},["prevent"])),size:"sm",color:"success"},{default:s(()=>[ss]),_:1}),a(S,{label:"Search Appointment",for:"search"},{default:s(()=>[a(I,{modelValue:n(U),"onUpdate:modelValue":l[2]||(l[2]=t=>ke(U)?U.value=t:U=t),id:"search",onKeyup:n(fe)},null,8,["modelValue","onKeyup"])]),_:1})])]),e("div",os,[e("table",ls,[as,e("tbody",ns,[(p(!0),A(de,null,Se(i.appointments.data,(t,Qe)=>{var xe,ge;return p(),A("tr",{key:Qe,class:ot(["hover:bg-gray-100",{"bg-red-100":t.deleted_at}])},[e("td",rs,m(t.id),1),e("td",is,[a(Ae,{label:t.appointment_status,color:n(Ve)(t.appointment_status)},null,8,["label","color"])]),e("td",ds,m(t.patient.full_name),1),e("td",cs,m(t.patient.email),1),e("td",us,m(t.schedule),1),e("td",ps,m(n(dt)(t.message)),1),e("td",ms,m(n(G)(t.subtotal)),1),e("td",_s,m(t.payments?"On-Branch":"N/A"),1),e("td",hs,[a(Ae,{label:t.payment_status,color:n(Ve)(t.payment_status)},null,8,["label","color"])]),e("td",fs,m(t.created_at),1),e("td",vs,m(t.deleted_at),1),e("td",ys,[a(_,{text:"",size:"sm",onClick:q=>{j(),r.value=t}},{default:s(()=>[xs]),_:2},1032,["onClick"]),t.appointment_status=="Pending"?(p(),f(_,{key:0,text:"",size:"sm",color:"error",onClick:q=>{O(),r.value=t}},{default:s(()=>[gs]),_:2},1032,["onClick"])):h("",!0),a(_,{text:"",size:"sm",onClick:q=>{ue(),r.value.healthFormData={q1:t.q1,q2:t.q2,q3:t.q3,q4:t.q4,q5:t.q5}}},{default:s(()=>[ws]),_:2},1032,["onClick"]),!t.deleted_at&&t.appointment_status!="Finished"&&t.appointment_status!="Approved"&&t.appointment_status!="Declined"&&!o.$page.props.auth.user.is_admin?(p(),f(_,{key:1,onClick:q=>{D.value=!1,F(t)},text:"",size:"sm",color:"success"},{default:s(()=>[bs]),_:2},1032,["onClick"])):h("",!0),(o.$page.props.auth.user.is_admin||t.payment_status!=="Pending")&&!t.deleted_at&&t.appointment_status=="Finished"?(p(),f(_,{key:2,"is-link":"",href:o.route("certificate.generate",t.id),text:"",size:"sm",color:"success"},{default:s(()=>[ks]),_:2},1032,["href"])):h("",!0),o.$page.props.auth.user.is_admin&&t.prescription==null&&t.appointment_status!="Pending"?(p(),f(_,{key:3,onClick:x(q=>H(t.id,t.prescription),["prevent"]),text:"",size:"sm",color:"success"},{default:s(()=>[Ss]),_:2},1032,["onClick"])):h("",!0),(t.payment_status=="Paid"||t.payment_status=="Partially-Paid")&&t.prescription!=null?(p(),f(_,{key:4,"is-link":"",href:o.route("prescription.generate",t.id),text:"",size:"sm",color:"success"},{default:s(()=>[Cs]),_:2},1032,["href"])):h("",!0),((xe=t.payment)==null?void 0:xe.payment_type)=="Stripe"&&t.payment_status=="Paid"?(p(),f(_,{key:5,color:"success","is-link":"",text:"",size:"sm",href:(ge=t.payment)==null?void 0:ge.receipt_url,target:"_"},{default:s(()=>[As]),_:2},1032,["href"])):h("",!0),t.payments&&(t.payment_status=="Paid"||t.payment_status=="Partially-Paid")?(p(),f(_,{key:6,"is-link":"",href:o.route("invoice.generate",t.id),text:"",size:"sm",color:"success"},{default:s(()=>[Ps]),_:2},1032,["href"])):h("",!0),Le(t)&&!t.deleted_at&&t.payment_status!="Paid"&&(t.appointment_status=="Approved"||t.appointment_status=="Finished")&&o.$page.props.auth.user.is_admin?(p(),f(_,{key:7,onClick:x(q=>{me(o.$page.props.auth.user.is_admin),r.value={...t}},["prevent"]),text:"",size:"sm",color:""},{default:s(()=>[Vs]),_:2},1032,["onClick"])):h("",!0),t.deleted_at?h("",!0):(p(),f(_,{key:8,onClick:x(q=>{Y(),r.value=t},["prevent"]),text:"",size:"sm",color:"error"},{default:s(()=>[Ms]),_:2},1032,["onClick"]))])],2)}),128)),i.appointments.data.length==0?(p(),A("tr",Ds,qs)):h("",!0)])])]),e("p",zs," Showing "+m((R=i.appointments.from)!=null?R:0)+" to "+m((ve=i.appointments.to)!=null?ve:0)+" out of "+m((ye=i.appointments.total)!=null?ye:0)+" appointments. ",1),a(rt,{links:i.appointments.links,right:""},null,8,["links"])])])])])]),te.value?(p(),f(V,{key:0,onClose:j},{title:s(()=>[Es,$s]),body:s(()=>[Ts,e("p",Ns," Full Name: "+m(r.value.patient.full_name),1),e("p",js," Email: "+m(r.value.patient.email),1),e("p",Us," Gender: "+m(r.value.patient.gender),1),Ls,e("p",Is," Schedule: "+m(r.value.schedule),1),e("p",Bs," Message: "+m(r.value.message),1),e("p",Os," Created: "+m(r.value.created_at),1),Hs,(p(!0),A(de,null,Se(r.value.services,t=>(p(),A("p",{class:"text-sm",key:t.id},m(t.service.service)+" - "+m(n(G)(t.service.price)),1))),128))]),footer:s(()=>[a(_,{onClick:x(j,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[Ys]),_:1},8,["onClick"]),r.value.deleted_at==null&&r.value.appointment_status=="Approved"&&r.value.appointment_status!="Cancelled"&&o.$page.props.auth.user.is_admin?(p(),f(_,{key:0,onClick:x(Re,["prevent"]),text:"",size:"sm",color:"success"},{default:s(()=>[Rs]),_:1},8,["onClick"])):h("",!0),r.value.deleted_at==null&&r.value.appointment_status=="Pending"&&r.value.appointment_status!="Cancelled"&&o.$page.props.auth.user.is_admin?(p(),f(_,{key:1,onClick:x(He,["prevent"]),text:"",size:"sm",color:"success"},{default:s(()=>[Ws]),_:1},8,["onClick"])):h("",!0)]),_:1})):h("",!0),Q.value?(p(),f(V,{key:1,onClose:O},{title:s(()=>[Gs]),body:s(()=>[Ks]),footer:s(()=>[a(_,{onClick:x(O,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[Xs]),_:1},8,["onClick"]),a(_,{onClick:x(Ye,["prevent"]),text:"",size:"sm",color:"error"},{default:s(()=>[Js]),_:1},8,["onClick"])]),_:1})):h("",!0),Z.value?(p(),f(V,{key:2,onClose:Y},{title:s(()=>[Qs]),body:s(()=>[Zs]),footer:s(()=>[a(_,{onClick:x(Y,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[eo]),_:1},8,["onClick"]),a(_,{onClick:x(Be,["prevent"]),text:"",size:"sm",color:"error"},{default:s(()=>[to]),_:1},8,["onClick"])]),_:1})):h("",!0),se.value?(p(),f(V,{key:3,onClose:H},{title:s(()=>[so,oo]),body:s(()=>[e("form",lo,[a(S,{label:"Prescription",for:"prescription",class:"mt-3",error:i.errors.prescription},{default:s(()=>[a(B,{modelValue:n(C).prescription,"onUpdate:modelValue":l[3]||(l[3]=t=>n(C).prescription=t),id:"prescription",required:"","aria-required":""},null,8,["modelValue"])]),_:1},8,["error"]),a(S,{label:"Additional Note",for:"prescription-additional",class:"mt-3",error:i.errors.note},{default:s(()=>[a(B,{modelValue:n(C).note,"onUpdate:modelValue":l[4]||(l[4]=t=>n(C).note=t),id:"prescription-additional",required:"","aria-required":""},null,8,["modelValue"])]),_:1},8,["error"])])]),footer:s(()=>[a(_,{onClick:x(H,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[ao]),_:1},8,["onClick"]),a(_,{onClick:x(Ie,["prevent"]),text:"",size:"sm",color:"success"},{default:s(()=>[no]),_:1},8,["onClick"])]),_:1})):h("",!0),M.value?(p(),f(V,{key:4,onClose:_e},{title:s(()=>[ro,io]),body:s(()=>[T.value?(p(),A("div",co,po)):h("",!0),lt(e("div",null,ho,512),[[at,!T.value]]),a(S,{for:"payment_fname",error:i.errors.schedule,label:"Full Name",class:"mt-1 mb-3"},{default:s(()=>[a(I,{disabled:"",type:"text",id:"payment_fname",modelValue:r.value.patient.full_name,"onUpdate:modelValue":l[5]||(l[5]=t=>r.value.patient.full_name=t),"aria-disabled":""},null,8,["modelValue"])]),_:1},8,["error"]),a(S,{for:"payment_fname",error:i.errors.schedule,label:"Address",class:"mt-3 mb-3"},{default:s(()=>[a(B,{type:"text",id:"payment_fname",modelValue:r.value.patient.address,"onUpdate:modelValue":l[6]||(l[6]=t=>r.value.patient.address=t),disabled:"","aria-disabled":""},null,8,["modelValue"])]),_:1},8,["error"])]),footer:s(()=>[a(_,{onClick:x(_e,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[fo]),_:1},8,["onClick"]),a(_,{onClick:x(Ne,["prevent"]),text:"",size:"sm",color:"success",disabled:n(P)},{default:s(()=>[c(m(n(P)?"Processing..":"Proceed"),1)]),_:1},8,["onClick","disabled"])]),_:1})):h("",!0),N.value?(p(),f(V,{key:5,onClose:ae},{title:s(()=>[vo,yo]),body:s(()=>[a(S,{label:"Payment Type",class:"w-full mt-3"},{default:s(()=>[a(Ce,{modelValue:n(k).is_installment,"onUpdate:modelValue":l[7]||(l[7]=t=>n(k).is_installment=t)},{default:s(()=>[xo,go]),_:1},8,["modelValue"])]),_:1}),a(S,{for:"payment_fname",error:i.errors.schedule,label:"Amount Tendered",class:"mt-3 mb-3"},{default:s(()=>[a(I,{type:"number",id:"amounttendered",modelValue:n(k).amount_tendered,"onUpdate:modelValue":l[8]||(l[8]=t=>n(k).amount_tendered=t)},null,8,["modelValue"])]),_:1},8,["error"]),a(S,{for:"addons_amount",error:i.errors.addons_amount,label:"Addons Amount",class:"mt-3 mb-3"},{default:s(()=>[a(I,{type:"number",id:"addons_amount",modelValue:n(k).addons_amount,"onUpdate:modelValue":l[9]||(l[9]=t=>n(k).addons_amount=t)},null,8,["modelValue"])]),_:1},8,["error"]),a(S,{for:"addons_note",error:i.errors.addons_note,label:"Addons Note",class:"mt-3 mb-3"},{default:s(()=>[a(B,{type:"text",id:"addons_note",modelValue:n(k).addons_note,"onUpdate:modelValue":l[10]||(l[10]=t=>n(k).addons_note=t)},null,8,["modelValue"])]),_:1},8,["error"]),a(S,{for:"subtotal",error:i.errors.subtotal,label:"Subtotal",class:"mt-3 mb-3"},{default:s(()=>[a(I,{type:"number",id:"subtotal",modelValue:r.value.subtotal,"onUpdate:modelValue":l[11]||(l[11]=t=>r.value.subtotal=t),disabled:"","aria-disabled":""},null,8,["modelValue"])]),_:1},8,["error"]),e("p",null,"Total Amount: "+m(n(Ue)),1)]),footer:s(()=>[a(_,{onClick:x(ae,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[wo]),_:1},8,["onClick"]),a(_,{onClick:x(Te,["prevent"]),text:"",size:"sm",color:"success",disabled:n(P)},{default:s(()=>[c(m(n(P)?"Processing..":"Proceed Payment"),1)]),_:1},8,["onClick","disabled"])]),_:1})):h("",!0),J.value?(p(),f(V,{key:6,onClose:F,scrollable:!1},{title:s(()=>[e("p",bo,m(D.value?"New Appointment":"Update Appointment"),1),ko]),body:s(()=>[e("form",So,[a(S,{for:"appointment",error:i.errors.schedule,label:"Date and Time",class:"mt-3"},{default:s(()=>[a(n(ct),{placeholder:"Select Date",class:"w-full",modelValue:n(u).schedule,"onUpdate:modelValue":l[12]||(l[12]=t=>n(u).schedule=t),is24:!1,weekStart:"0",disabledWeekDays:[0],"minutes-grid-increment":"60","no-minutes-overlay":"","minutes-increment":"00","min-date":n(z)().add(1,"day").format("YYYY-MM-DDT10:00"),"max-date":n(z)().add(2,"month").format("YYYY-MM-DDT05:00")},null,8,["modelValue","min-date","max-date"])]),_:1},8,["error"]),a(S,{for:"message",error:i.errors.message,label:"Message",class:"mt-2"},{default:s(()=>[a(B,{id:"message",modelValue:n(u).message,"onUpdate:modelValue":l[13]||(l[13]=t=>n(u).message=t)},null,8,["modelValue"])]),_:1},8,["error"]),Co,a(n(Me),{modelValue:n(u).selected_services,"onUpdate:modelValue":l[14]||(l[14]=t=>n(u).selected_services=t),options:i.services,multiple:!0,class:"border-1 border-gray-400 rounded-lg",selectLabel:"Select",deselectLabel:"Deselect",label:"service","track-by":"id"},{option:s(t=>[e("div",Ao,[e("span",Po,m(t.option.service),1),e("span",Vo,m(n(G)(t.option.price)),1)])]),_:1},8,["modelValue","options"]),i.errors.selected_services?(p(),A("p",Mo,m(i.errors.selected_services),1)):h("",!0),o.$page.props.auth.user.is_admin?(p(),A("div",Do,[Fo,a(n(Me),{modelValue:n(u).user_id,"onUpdate:modelValue":l[15]||(l[15]=t=>n(u).user_id=t),onSearchChange:n(Je),options:i.users,multiple:!1,class:"border-1 border-gray-400 rounded-lg",selectLabel:"Select",deselectLabel:"Deselect",label:"full_name","track-by":"id","open-direction":"bottom",disabled:!D.value},null,8,["modelValue","onSearchChange","options","disabled"]),i.errors.user_id?(p(),A("p",qo,m(i.errors.user_id),1)):h("",!0)])):h("",!0),e("p",zo," Subtotal: "+m(n(G)(n(u).subtotal)),1)])]),footer:s(()=>[a(_,{onClick:x(F,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[Eo]),_:1},8,["onClick"]),D.value?(p(),f(_,{key:0,onClick:x($,["prevent"]),text:"",size:"sm",color:"success"},{default:s(()=>[$o]),_:1},8,["onClick"])):(p(),f(_,{key:1,onClick:x(he,["prevent"]),text:"",size:"sm",color:"success"},{default:s(()=>[To]),_:1},8,["onClick"]))]),_:1})):h("",!0),ee.value?(p(),f(V,{key:7,onClose:ne},{title:s(()=>[No]),body:s(()=>[jo]),footer:s(()=>[a(_,{onClick:x(ne,["prevent"]),text:"",size:"sm",color:"gray"},{default:s(()=>[Uo]),_:1},8,["onClick"]),a(_,{onClick:x(Oe,["prevent"]),text:"",size:"sm",color:"success"},{default:s(()=>[Lo]),_:1},8,["onClick"])]),_:1})):h("",!0),oe.value?(p(),f(Pe,{key:8,data:n(u).healthFormData,onEmitClose:$,onEmitSaveAppointment:he},null,8,["data"])):h("",!0),le.value?(p(),f(Pe,{key:9,"view-only":"",scrollable:"",data:r.value.healthFormData,onEmitClose:ue},null,8,["data"])):h("",!0)]}),_:1})],64))}};export{ll as default};
